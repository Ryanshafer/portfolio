---
import type { WorkEntry } from '../../types/work';
import { renderMarkdown } from '../../utils/markdown';

type RelatedCaseStudy = {
  title: string;
  slug: string;
};

interface Props {
  entry: WorkEntry;
  caseStudies?: RelatedCaseStudy[];
}

const { entry, caseStudies = [] } = Astro.props as Props;
const descriptionHtml = await renderMarkdown(entry.description);
---

<article
  class="prose prose-resume"
>
  <header>
    <div>
      <p class="text-lg mt-2 my-0 text-black/70 dark:text-white/70">
        <span>{entry.start}</span>
        <span class="px-1">â€”</span>
        <span>{entry.end}, </span>
        <span>{entry.location}</span>
      </p>
      <h2 class="font-heading text-2xl-custom md:text-5xl font-black text-black dark:text-white mt-1 mb-2">
        {entry.title}
      </h2>
      <p class="font-heading text-3xl font-bold text-black dark:text-white mb-3 md:mb-6">{entry.company}</p>
    </div>
  </header>
  <p class="my-0 text-base dark:text-white">{entry.intro}</p>
  <div class="mt-4 text-black dark:text-white" set:html={descriptionHtml} />
  {caseStudies.length > 0 && (
    <div class="mt-6">
      <h3>
        Related Case Studies
      </h3>
      <ul class="mt-3 space-y-2">
        {caseStudies.map((study) => (
          <li>
            <a
              href={`/case-studies/${study.slug}`}
              class="inline-flex items-center gap-2 text-lg font-medium text-black underline  decoration-black/40 transition hover:text-black/70 hover:underline-offset-2 dark:text-white"
            >
              {study.title}
            </a>
          </li>
        ))}
      </ul>
    </div>
  )}
</article>
