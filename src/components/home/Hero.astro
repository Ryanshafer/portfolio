---
import { getCollection } from 'astro:content';

const allStudies = await getCollection('studies');

// Choose your featured case studies by slug, in the exact order you want
const featuredSlugs = ['building-design-systems', 'mtv-brand-cohesion', 'my-third-study'];

import type { CollectionEntry } from 'astro:content';

const featuredStudies: CollectionEntry<'studies'>[] = featuredSlugs
  .map((slug) => allStudies.find((study) => study.slug === slug))
  .filter((study): study is CollectionEntry<'studies'> => Boolean(study));

import PostPreview from '../case-studies/PostPreview.astro';
import Button from '../layout/Button.astro';

const ellipseImages = ['ellipse-1.png', 'ellipse-2.png', 'ellipse-3.png'];
const heroEllipse = ellipseImages[0];
---

<section class="page-header relative overflow-hidden bg-herowhite dark:bg-herodark">
  <div class="page-header__bg-wrapper" aria-hidden="true">
    <div class="page-header__bg-ellipse__home">
      <img src={`/assets/ellipses/${heroEllipse}`} alt="" loading="eager" class="page-header__bg-image" />
    </div>
  </div>
  <div class="relative z-10 mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8">
    <!-- HERO TEXT aligned to new design -->
    <div class="py-10 md:py-16 lg:py-[5.5rem]">
      <div class="grid grid-cols-1 lg:grid-cols-12 lg:gap-x-6">
        <!-- Heading block -->
        <div class="col-span-full lg:col-span-12">
          <p class="font-heading text-2xl md:text-3xl lg:text-5xl text-black tracking-[-0.018em]">Hello, I’m Ryan.</p>
          <h1
            class="mt-3 font-heading font-black tracking-[-0.018em] text-black leading-[0.85]
                   text-[clamp(2rem,7vw+1rem,6rem)] md:text-[clamp(2rem,7vw+1.5rem,5.5rem)] lg:text-[clamp(2rem,7vw+3rem,9.5rem)] sm:whitespace-nowrap"
          >
            I design for people.
          </h1>
        </div>

        <!-- Subcopy + CTA -->
        <div class="col-span-full lg:col-span-8 lg:col-start-5 mt-6 lg:mt-[4rem] flex flex-col gap-6 lg:flex-row lg:items-top lg:justify-between">
          <p class="font-heading text-xl sm:text-2xl leading-tight text-black/70 max-w-3xl mr-0 md:mr-12">
            I’m a design leader with 20+ years turning complexity into clear, measurable outcomes across product, marketing, and brand.
          </p>
          <div class="shrink-0 mt-2">
            <Button href="/contact" cta="Let’s Talk →" forceLight="true" />
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<section class="mb-10 mt-0 sm:mb-20 lg:mt-[5rem]">
  <div class="mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8">
    <div class="flex flex-col"></div>
    <!-- FEATURED CASE STUDIES -->
    <!-- Container for the entire 3-promo layout -->
    <div class="grid grid-cols-1 gap-x-6 gap-y-6 pt-10 md:grid-cols-12 lg:pt-0">
      <h2
        class="col-span-full font-heading text-4xl font-bold text-black dark:text-white md:col-span-4"
      >
        Featured Work
      </h2>
      <!-- Large promo -->
      <div class="col-span-full md:col-span-8 md:col-start-5 lg:col-start-5">
        <PostPreview post={featuredStudies[0]} layout="featured-169-simple" />
      </div>

      <!-- Smaller promos below the large promo -->
      <div class="col-span-full md:col-span-4 md:col-start-5 lg:col-start-5">
        <PostPreview post={featuredStudies[1]} />
      </div>

      <div class="col-span-full md:col-span-4 md:col-start-9 lg:col-start-9">
        <PostPreview post={featuredStudies[2]} />
      </div>
    </div>

    <!-- SEE ALL BUTTON -->
    <div class="mt-11 flex w-full justify-end">
      <Button href="/case-studies" cta="Explore My Process →" />
    </div>
  </div>
</section>
