---
import { getCollection } from 'astro:content';

const allStudies = await getCollection('studies');

// Choose your featured case studies by slug, in the exact order you want
const featuredSlugs = ['mtv-brand-cohesion', 'my-second-study', 'my-third-study'];

import type { CollectionEntry } from 'astro:content';

const featuredStudies: CollectionEntry<'studies'>[] = featuredSlugs
  .map((slug) => allStudies.find((study) => study.slug === slug))
  .filter((study): study is CollectionEntry<'studies'> => Boolean(study));

import PostPreview from '../case-studies/PostPreview.astro';
import Button from '../layout/Button.astro';
---

<section class="bg-herowhite dark:bg-herodark">
  <div class="mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8">
    <div class="flex flex-col">
      <!-- HERO TEXT -->
      <div class="mx-auto my-16 lg:my-[5.5rem]">
        <h1
          class="highlighted-heading overflow-visible text-center font-heading text-5xl font-black tracking-[-0.018em] dark:text-white lg:text-[4.25rem]"
        >
          Hi, I’m Ryan<span class="inline sm:hidden">.</span><br class="inline sm:hidden" /><span
            class="hidden sm:inline"
          >
            —
          </span>I design for people.
        </h1>
        <p
          class="mt-7 text-center font-heading text-2xl leading-tight text-black/70 dark:text-white/70 lg:mb-3"
        >
          A design leader with 20+ years turning complex challenges into clarity across product, marketing, and branding.
        </p>
      </div>
    </div>
  </div>
</section>
<section class="mb-10 mt-0 sm:mb-20 lg:mt-[5rem]">
  <div class="mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8">
    <div class="flex flex-col"></div>
    <!-- FEATURED CASE STUDIES -->
    <!-- Container for the entire 3-promo layout -->
    <div class="grid grid-cols-1 gap-x-6 gap-y-8 pt-10 md:grid-cols-12 lg:pt-0">
      <h2
        class="col-span-full font-heading text-4xl font-bold text-black dark:text-white md:col-span-4"
      >
        Featured Work
      </h2>
      <!-- Large promo -->
      <div class="col-span-full md:col-span-8 md:col-start-5 lg:col-start-5">
        <PostPreview post={featuredStudies[0]} layout="featured" />
      </div>

      <!-- Smaller promos below the large promo -->
      <div class="col-span-full md:col-span-4 md:col-start-5 lg:col-start-5">
        <PostPreview post={featuredStudies[1]} />
      </div>

      <div class="col-span-full md:col-span-4 md:col-start-9 lg:col-start-9">
        <PostPreview post={featuredStudies[2]} />
      </div>
    </div>

    <!-- SEE ALL BUTTON -->
    <div class="mt-11 flex w-full justify-end">
      <Button href="/case-studies" cta="Explore My Process →" />
    </div>
  </div>
</section>
