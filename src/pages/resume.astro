---
import Layout from '../layouts/Layout.astro';
import ResumeHero from '../components/resume/ResumeHero.astro';
import Skills from '../components/resume/Skills.astro';
import WorkHistory from '../components/resume/WorkHistory.astro';
import { workEntries } from '../content/work-data.mjs';

const siteOrigin = Astro.site?.origin ?? 'https://ryanshafer.com';
const toAbsoluteUrl = (path: string) => {
  if (!siteOrigin) return path;
  return new URL(path, siteOrigin).toString();
};
const resumeUrl = siteOrigin ? new URL('/resume/', siteOrigin).toString() : undefined;
const sameAsLinks = [
  'https://www.linkedin.com/in/ryanshafer',
  'https://github.com/ryanshafer',
  'https://twitter.com/ryanshafer',
  'https://instagram.com/ryanshafer',
];
const hasOccupation = workEntries.map((entry) => ({
  '@type': 'Occupation',
  name: entry.title,
  description: entry.intro,
  employer: {
    '@type': 'Organization',
    name: entry.company,
  },
  startDate: entry.start,
  endDate: entry.end,
  occupationLocation: entry.location,
}));
const personSchema = {
  '@context': 'https://schema.org',
  '@type': 'Person',
  name: 'Ryan Shafer',
  jobTitle: 'UX/Product Design Leader',
  url: resumeUrl ?? siteOrigin,
  sameAs: sameAsLinks,
  image: toAbsoluteUrl('/assets/ryan-shafer.jpg'),
  worksFor: hasOccupation[0]?.employer,
  hasOccupation,
  knowsAbout: [
    'Design Systems',
    'UX Strategy',
    'Product Design',
    'Cross-platform Experience',
  ],
  alumniOf: [
    {
      '@type': 'CollegeOrUniversity',
      name: 'Rhode Island School of Design',
      sameAs: 'https://www.risd.edu/',
    },
  ],
};
---

<Layout
  title="Resume | Ryan Shafer, UX/Product Design Leader"
  description="Explore Ryan Shafer’s experience, skills, and UX/product design leadership journey."
  structuredData={[personSchema]}
>
  <main class="flex flex-col gap-6">
    <ResumeHero />
    <Skills />
    <WorkHistory />
    <section class="my-4 lg:my-12 prose prose-resume">
      <div
        class="mx-auto grid max-w-2xl grid-cols-4 gap-x-6 gap-y-6 px-4 sm:px-6 lg:max-w-7xl lg:grid-cols-12 lg:gap-x-6 lg:px-8"
      >
        <h2
          class="col-span-full self-start pt-7 font-heading text-3xl font-bold text-black dark:text-white lg:sticky lg:top-4 lg:col-span-3 lg:col-start-2"
        >
          Education
        </h2>
        <div
          class="col-span-full space-y-6 border-t border-black/30 pt-6 dark:border-white/30 lg:col-span-8 lg:col-start-5"
        >
          <header>
            <div>
              <p class="my-0 mt-2 text-lg text-black/70 dark:text-white/70">
                <span>1996</span>
                <span class="px-1">—</span>
                <span>2000</span>
                <span class="pl-2">Providence, RI</span>
              </p>
              <h3
                class="mb-2 mt-1 font-heading text-2xl-custom font-black text-black dark:text-white md:text-5xl"
              >
                Rhode Island School of Design (RISD)
              </h3>
            </div>
          </header>
          <p class="my-0 text-base dark:text-white">B.F.A. in Film/Animation/Video</p>
        </div>
      </div>
    </section>
  </main>
</Layout>
